<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Recommender</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=5" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <!-- Hero Section with Background -->
    <div class="hero-section">
      <img src="{{ url_for('static', filename='hero-banner.png') }}" alt="Anime Banner" class="hero-banner">
      <div class="hero-overlay"></div>
    </div>

    <div class="container">
      <h1>Anime Recommender</h1>
      <p class="subtitle">Discover your next favorite anime by Title or Genre.</p>

      <!-- Stats Counter -->
      <div class="stats-counter">
        <span class="stat-number">17,000+</span> Anime in Database
      </div>

      <div class="card">
        <!-- Feature Highlights -->
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">üîç</div>
            <div class="feature-title">Smart Search</div>
            <div class="feature-desc">AI-powered recommendations</div>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üé¨</div>
            <div class="feature-title">Live Images</div>
            <div class="feature-desc">Scraped from MyAnimeList</div>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üìä</div>
            <div class="feature-title">Advanced Filters</div>
            <div class="feature-desc">Type, Year, Genre</div>
          </div>
        </div>

        <form action="/recommend" method="POST" class="search-box">
          <div class="filter-group">
              <input
                list="anime-list"
                type="text"
                name="title"
                id="search-input"
                placeholder="Try 'Demon Slayer' or 'Action'..."
                required
                autocomplete="off"
                class="search-input"
              />
              
              <select name="type" class="filter-select">
                  <option value="">All Types</option>
                  <option value="TV">TV</option>
                  <option value="Movie">Movie</option>
                  <option value="OVA">OVA</option>
                  <option value="ONA">ONA</option>
                  <option value="Special">Special</option>
              </select>
              
              <select name="year" class="filter-select">
                  <option value="">Any Year</option>
                  {% for y in range(2024, 1989, -1) %}
                  <option value="{{ y }}">{{ y }}</option>
                  {% endfor %}
              </select>
              
              <button type="submit" class="btn-search">Search</button>
          </div>

          <datalist id="anime-list">
            {% for t in titles %}
            <option value="{{ t }}">
            {% endfor %}
          </datalist>
        </form>

        <!-- Quick Examples -->
        <div class="quick-examples">
          <span class="examples-label">Quick Search:</span>
          <button type="button" class="example-btn" data-query="Action">Action</button>
          <button type="button" class="example-btn" data-query="Romance">Romance</button>
          <button type="button" class="example-btn" data-query="Horror">Horror</button>
          <button type="button" class="example-btn" data-query="Sci-Fi">Sci-Fi</button>
        </div>

        <!-- Popular Searches -->
        <div class="popular-searches">
          Popular: <span class="popular-item">Naruto</span>, <span class="popular-item">Attack on Titan</span>, <span class="popular-item">One Piece</span>
        </div>

        <!-- Keyboard Hint -->
        <div class="keyboard-hint">
          üí° Tip: Press <kbd>/</kbd> to focus search
        </div>

        {% if error %}
        <div class="error-msg">
            {{ error }}
        </div>
        {% endif %}
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loader">
        <div class="spinner"></div>
        <div class="loading-text">Summoning Anime...</div>
    </div>

    <script>
        // Loading overlay
        document.querySelector('.search-box').addEventListener('submit', function() {
            document.getElementById('loader').style.display = 'flex';
        });

        // Rotating placeholder
        const placeholders = [
            "Try 'Demon Slayer' or 'Action'...",
            "Try 'Naruto' or 'Shonen'...",
            "Try 'Death Note' or 'Thriller'...",
            "Try 'Your Name' or 'Romance'..."
        ];
        let currentIndex = 0;
        const searchInput = document.getElementById('search-input');
        
        setInterval(() => {
            currentIndex = (currentIndex + 1) % placeholders.length;
            searchInput.placeholder = placeholders[currentIndex];
        }, 3000);

        // Keyboard shortcut (/)
        document.addEventListener('keydown', function(e) {
            if (e.key === '/' && document.activeElement !== searchInput) {
                e.preventDefault();
                searchInput.focus();
            }
        });

        // Quick example buttons
        document.querySelectorAll('.example-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                searchInput.value = this.dataset.query;
                searchInput.focus();
            });
        });

        // Popular item clicks
        document.querySelectorAll('.popular-item').forEach(item => {
            item.style.cursor = 'pointer';
            item.addEventListener('click', function() {
                searchInput.value = this.textContent;
                searchInput.focus();
            });
        });
    </script>
  </body>
</html>
